webpackJsonp([4,169],{856:function(n,s){n.exports={content:["article",{},["h2","\u63a8\u9001\u63d2\u4ef6jpush-react-native"],["p",["img",{"class":"preview-img",width:"210",align:"right",alt:"\u6d88\u606f\u63a8\u9001\u793a\u4f8b",description:"\u6d88\u606f\u63a8\u9001\u6837\u4f8b",src:"https://app-design.github.io/s/push-001.jpg"}]],["blockquote",["p","React Native\u7684\u6781\u5149\u63a8\u9001\u63d2\u4ef6, react-native\u7248\u672c\u9700\u89810.17.0\u53ca\u4ee5\u4e0a"]],["h2","\u5982\u4f55\u5b89\u88c5"],["h3","\u9996\u5148\u5b89\u88c5npm\u5305"],["pre",{lang:"bash",highlighted:'<span class="token function">npm</span> <span class="token function">install</span> react-native-jpush --save'},["code","npm install react-native-jpush --save"]],["h3","link"],["pre",{lang:"bash",highlighted:'rnpm <span class="token function">link</span> react-native-jpush'},["code","rnpm link react-native-jpush"]],["h4","Note:"],["ul",["li",["p","rnpm requires node version 4.1 or higher"]],["li",["p","Android SDK Build-tools 23.0.2 or higher"]]],["h3","iOS\u5de5\u7a0b\u914d\u7f6e"],["p","a.\u5728\u5de5\u7a0btarget\u7684",["code","Build Phases->Link Binary with Libraries"],"\u4e2d\u52a0\u5165",["code","libz.tbd\u3001CoreTelephony.framework\u3001Security.framework"]],["p","b.\u5728\u4f60\u7684\u5de5\u7a0b\u4e2d\u521b\u5efa\u4e00\u4e2a\u65b0\u7684Property List\u6587\u4ef6\uff0c\u5e76\u5c06\u5176\u547d\u540d\u4e3aPushConfig.plist\uff0c\u6587\u4ef6\u6240\u542b\u5b57\u6bb5\u5982\u4e0b\uff1a"],["pre",{lang:null,highlighted:'CHANNEL\n\t\u6307\u660e\u5e94\u7528\u7a0b\u5e8f\u5305\u7684\u4e0b\u8f7d\u6e20\u9053\uff0c\u4e3a\u65b9\u4fbf\u5206\u6e20\u9053\u7edf\u8ba1\uff0c\u5177\u4f53\u503c\u7531\u4f60\u81ea\u884c\u5b9a\u4e49\uff0c\u5982\uff1aApp Store\u3002\nAPP_KEY\n\t\u4e0eJPush\u4e0a\u7533\u8bf7\u7684 AppKey \u4e00\u81f4\u3002\nAPS_FOR_PRODUCTION\n\t<span class="token number">0</span> <span class="token punctuation">(</span>\u9ed8\u8ba4\u503c<span class="token punctuation">)</span>\u8868\u793a\u91c7\u7528\u7684\u662f\u5f00\u53d1\u8bc1\u4e66\uff0c<span class="token number">1</span> \u8868\u793a\u91c7\u7528\u751f\u4ea7\u8bc1\u4e66\u53d1\u5e03\u5e94\u7528\u3002\n\t\u6ce8\uff1a\u6b64\u5b57\u6bb5\u7684\u503c\u8981\u4e0eBuild Settings\u7684Code Signing\u914d\u7f6e\u7684\u8bc1\u4e66\u73af\u5883\u4e00\u81f4\u3002'},["code","CHANNEL\n\t\u6307\u660e\u5e94\u7528\u7a0b\u5e8f\u5305\u7684\u4e0b\u8f7d\u6e20\u9053\uff0c\u4e3a\u65b9\u4fbf\u5206\u6e20\u9053\u7edf\u8ba1\uff0c\u5177\u4f53\u503c\u7531\u4f60\u81ea\u884c\u5b9a\u4e49\uff0c\u5982\uff1aApp Store\u3002\nAPP_KEY\n\t\u4e0eJPush\u4e0a\u7533\u8bf7\u7684 AppKey \u4e00\u81f4\u3002\nAPS_FOR_PRODUCTION\n\t0 (\u9ed8\u8ba4\u503c)\u8868\u793a\u91c7\u7528\u7684\u662f\u5f00\u53d1\u8bc1\u4e66\uff0c1 \u8868\u793a\u91c7\u7528\u751f\u4ea7\u8bc1\u4e66\u53d1\u5e03\u5e94\u7528\u3002\n\t\u6ce8\uff1a\u6b64\u5b57\u6bb5\u7684\u503c\u8981\u4e0eBuild Settings\u7684Code Signing\u914d\u7f6e\u7684\u8bc1\u4e66\u73af\u5883\u4e00\u81f4\u3002"]],["p","c.\u5728",["code","AppDelegate.m"],"\u4e2d\u52a0\u5165"],["pre",{lang:null,highlighted:'<span class="token directive keyword">#import</span> <span class="token string">"RCTJPush.h"</span>\n\n<span class="token operator">-</span> <span class="token punctuation">(</span>BOOL<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application didFinishLaunchingWithOptions<span class="token punctuation">:</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span><span class="token punctuation">)</span>launchOptions\n{\n  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\n  \n  <span class="token punctuation">[</span>RCTJPush application<span class="token punctuation">:</span>application didFinishLaunchingWithOptions<span class="token punctuation">:</span>launchOptions<span class="token punctuation">]</span><span class="token comment" spellcheck="true">;</span>\n  \n  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>\n}\n\n<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application didRegisterForRemoteNotificationsWithDeviceToken<span class="token punctuation">:</span><span class="token punctuation">(</span>NSData <span class="token operator">*</span><span class="token punctuation">)</span>deviceToken\n{\n  <span class="token punctuation">[</span>RCTJPush application<span class="token punctuation">:</span>application didRegisterForRemoteNotificationsWithDeviceToken<span class="token punctuation">:</span>deviceToken<span class="token punctuation">]</span><span class="token comment" spellcheck="true">;</span>\n}\n\n<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application didReceiveRemoteNotification<span class="token punctuation">:</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span><span class="token punctuation">)</span>notification\n{\n  <span class="token punctuation">[</span>RCTJPush application<span class="token punctuation">:</span>application didReceiveRemoteNotification<span class="token punctuation">:</span>notification<span class="token punctuation">]</span><span class="token comment" spellcheck="true">;</span>\n}\n\n<span class="token operator">-</span> <span class="token punctuation">(</span>void<span class="token punctuation">)</span>application<span class="token punctuation">:</span><span class="token punctuation">(</span>UIApplication <span class="token operator">*</span><span class="token punctuation">)</span>application didReceiveRemoteNotification<span class="token punctuation">:</span><span class="token punctuation">(</span>NSDictionary <span class="token operator">*</span><span class="token punctuation">)</span>notification fetchCompletionHandler<span class="token punctuation">:</span><span class="token punctuation">(</span>void <span class="token punctuation">(</span><span class="token operator">^</span><span class="token punctuation">)</span><span class="token punctuation">(</span>UIBackgroundFetchResult<span class="token punctuation">)</span><span class="token punctuation">)</span>completionHandler {\n  <span class="token punctuation">[</span>RCTJPush application<span class="token punctuation">:</span>application didReceiveRemoteNotification<span class="token punctuation">:</span>notification<span class="token punctuation">]</span><span class="token comment" spellcheck="true">;</span>\n  <span class="token function">completionHandler</span><span class="token punctuation">(</span>UIBackgroundFetchResultNewData<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>\n}'},["code",'#import "RCTJPush.h"\n\n- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions\n{\n  ...\n  \n  [RCTJPush application:application didFinishLaunchingWithOptions:launchOptions];\n  \n  ...\n}\n\n- (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken\n{\n  [RCTJPush application:application didRegisterForRemoteNotificationsWithDeviceToken:deviceToken];\n}\n\n- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)notification\n{\n  [RCTJPush application:application didReceiveRemoteNotification:notification];\n}\n\n- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)notification fetchCompletionHandler:(void (^)(UIBackgroundFetchResult))completionHandler {\n  [RCTJPush application:application didReceiveRemoteNotification:notification];\n  completionHandler(UIBackgroundFetchResultNewData);\n}']],["h3","Android\u914d\u7f6e"],["p","\u5728",["code","android/app/build.gradle"],"\u91cc\uff0cdefaultConfig\u680f\u76ee\u4e0b\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a"],["pre",{lang:null,highlighted:'manifestPlaceholders <span class="token operator">=</span> <span class="token punctuation">[</span>\n    JPush_APPID<span class="token punctuation">:</span> <span class="token string">"JPush\u7684APPID"</span><span class="token punctuation">,</span>\t<span class="token operator">/</span><span class="token operator">/</span>\u5728\u6b64\u4fee\u6539JPush\u7684APPID\n    APP_CHANNEL<span class="token punctuation">:</span> <span class="token string">"\u5e94\u7528\u6e20\u9053\u53f7"</span>\t\t<span class="token operator">/</span><span class="token operator">/</span>\u5e94\u7528\u6e20\u9053\u53f7\n<span class="token punctuation">]</span>'},["code",'manifestPlaceholders = [\n    JPush_APPID: "JPush\u7684APPID",\t//\u5728\u6b64\u4fee\u6539JPush\u7684APPID\n    APP_CHANNEL: "\u5e94\u7528\u6e20\u9053\u53f7"\t\t//\u5e94\u7528\u6e20\u9053\u53f7\n]']],["h2","\u5982\u4f55\u4f7f\u7528"],["h3","\u5f15\u5165\u5305"],["pre",{lang:null,highlighted:'import JPush <span class="token punctuation">,</span> {JpushEventReceiveMessage<span class="token punctuation">,</span> JpushEventOpenMessage} from <span class="token string">\'react-native-jpush\'</span>'},["code","import JPush , {JpushEventReceiveMessage, JpushEventOpenMessage} from 'react-native-jpush'"]],["p","\u5728\u4f60\u7684\u6839Component\u4e2d\u52a0\u5165\u4e0b\u9762\u4ee3\u7801"],["pre",{lang:null,highlighted:'<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> {\n    JPush<span class="token punctuation">.</span><span class="token function">requestPermissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n    this<span class="token punctuation">.</span>pushlisteners <span class="token operator">=</span> <span class="token punctuation">[</span>\n        JPush<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>JpushEventReceiveMessage<span class="token punctuation">,</span> this<span class="token punctuation">.</span>onReceiveMessage<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n        JPush<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>JpushEventOpenMessage<span class="token punctuation">,</span> this<span class="token punctuation">.</span>onOpenMessage<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token punctuation">]</span>\n}\n<span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> {\n    this<span class="token punctuation">.</span>pushlisteners<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>listener<span class="token operator">=</span><span class="token operator">></span> {\n        JPush<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>listener<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>\n    }<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>\n}\n<span class="token function">onReceiveMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> {\n}\n<span class="token function">onOpenMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> {\n}'},["code","componentDidMount() {\n    JPush.requestPermissions()\n    this.pushlisteners = [\n        JPush.addEventListener(JpushEventReceiveMessage, this.onReceiveMessage.bind(this)),\n        JPush.addEventListener(JpushEventOpenMessage, this.onOpenMessage.bind(this)),\n    ]\n}\ncomponentWillUnmount() {\n    this.pushlisteners.forEach(listener=> {\n        JPush.removeEventListener(listener);\n    });\n}\nonReceiveMessage(message) {\n}\nonOpenMessage(message) {\n}"]]],meta:{category:"\u8bbe\u8ba1\u6307\u5f15",order:13,title:{"zh-CN":"\u6d88\u606f\u63a8\u9001","en-US":"Message Push"},filename:"docs/spec/13-push.md"},description:["section",["p","app\u901a\u5e38\u4f1a\u63a5\u53d7\u5404\u79cd\u5404\u6837\u7684\u4fe1\u606f\uff0capp\u53ef\u4ee5\u5c06\u5e7f\u544a\u3001\u5ba2\u6237\u8ba2\u9605\u7684\u4fe1\u606f\u3001\u5206\u95e8\u522b\u7c7b\u7684\u63a8\u9001\u7ed9\u624b\u673a\u7aef\u3002\u8fd9\u4e5f\u662f\u624b\u6301\u8bbe\u5907\u7279\u6709\u7684\u4e92\u52a8\u6027\u6d88\u606f\u673a\u5236\u3002\u6211\u4eec\u901a\u5e38\u501f\u52a9\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u6765\u5b8c\u6210\u6d88\u606f\u63a8\u9001\u3002"]],toc:["ul",["li",["a",{className:"bisheng-toc-h2",href:"#\u63a8\u9001\u63d2\u4ef6jpush-react-native",title:"\u63a8\u9001\u63d2\u4ef6jpush-react-native"},"\u63a8\u9001\u63d2\u4ef6jpush-react-native"]],["li",["a",{className:"bisheng-toc-h2",href:"#\u5982\u4f55\u5b89\u88c5",title:"\u5982\u4f55\u5b89\u88c5"},"\u5982\u4f55\u5b89\u88c5"]],["li",["a",{className:"bisheng-toc-h2",href:"#\u5982\u4f55\u4f7f\u7528",title:"\u5982\u4f55\u4f7f\u7528"},"\u5982\u4f55\u4f7f\u7528"]]]}}});